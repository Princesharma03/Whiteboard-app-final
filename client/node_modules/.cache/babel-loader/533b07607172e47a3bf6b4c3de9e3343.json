{"ast":null,"code":"import _classCallCheck from\"/home/in528/Documents/whiteBoard-app/whiteboard-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/in528/Documents/whiteBoard-app/whiteboard-app/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/in528/Documents/whiteBoard-app/whiteboard-app/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/in528/Documents/whiteBoard-app/whiteboard-app/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import io from'socket.io-client';import'./style.css';import{Download}from\"react-bootstrap-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Board=/*#__PURE__*/function(_React$Component){_inherits(Board,_React$Component);var _super=_createSuper(Board);function Board(props){var _this;_classCallCheck(this,Board);_this=_super.call(this,props);_this.socket=io.connect(\"https://whiteboard-for-inno.herokuapp.com\");_this.isDrawing=false;_this.socket.on(\"canvas-data\",function(data){var root=this;var interval=setInterval(function(){if(root.isDrawing)return;root.isDrawing=true;clearInterval(interval);var image=new Image();var canvas=document.querySelector('#board');var ctx=canvas.getContext('2d');image.onload=function(){ctx.drawImage(image,0,0);root.isDrawing=false;};image.src=data;},200);});return _this;}_createClass(Board,[{key:\"componentDidMount\",value:function componentDidMount(){//  console.log(this.props)\nthis.socket.emit(\"join-room\",this.props.room);this.drawOnCanvas();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(newProps){this.ctx.strokeStyle=newProps.color;this.ctx.lineWidth=newProps.size;this.room=newProps.room;}},{key:\"drawOnCanvas\",value:function drawOnCanvas(){var canvas=document.querySelector('#board');this.ctx=canvas.getContext('2d');var ctx=this.ctx;var sketch=document.querySelector('#sketch');var sketch_style=getComputedStyle(sketch);canvas.width=parseInt(sketch_style.getPropertyValue('width'));canvas.height=parseInt(sketch_style.getPropertyValue('height'));var mouse={x:0,y:0};var last_mouse={x:0,y:0};/* Mouse Capturing Work */canvas.addEventListener('mousemove',function(e){last_mouse.x=mouse.x;last_mouse.y=mouse.y;mouse.x=e.pageX-this.offsetLeft;mouse.y=e.pageY-this.offsetTop;},false);/* Drawing on Paint App */ctx.lineWidth=this.props.size;ctx.lineJoin='round';ctx.lineCap='round';ctx.strokeStyle=this.props.color;canvas.addEventListener('mousedown',function(e){canvas.addEventListener('mousemove',onPaint,false);},false);canvas.addEventListener('mouseup',function(){canvas.removeEventListener('mousemove',onPaint,false);},false);var rooms=this.props.room;// console.log(this.props.room)\nvar root=this;var onPaint=function onPaint(){ctx.beginPath();ctx.moveTo(last_mouse.x,last_mouse.y);ctx.lineTo(mouse.x,mouse.y);ctx.closePath();ctx.stroke();if(root.timeout!=undefined)clearTimeout(root.timeout);root.timeout=setTimeout(function(){var base64ImageData=canvas.toDataURL(\"image/png\");console.log(rooms);root.socket.emit(\"canvas-data\",base64ImageData,rooms);},500);};}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{class:\"sketch\",id:\"sketch\",children:[/*#__PURE__*/_jsx(\"a\",{id:\"download\",download:\"whiteboard.png\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bydownbtn\",onClick:function onClick(){var download=document.getElementById(\"download\");var image=document.getElementById(\"board\").toDataURL(\"image/png\").replace(\"image/png\",\"image/octet-stream\");download.setAttribute(\"href\",image);},children:/*#__PURE__*/_jsx(Download,{})})}),/*#__PURE__*/_jsx(\"canvas\",{className:\"board\",id:\"board\"})]});}}]);return Board;}(React.Component);export default Board;","map":{"version":3,"sources":["/home/in528/Documents/whiteBoard-app/whiteboard-app/client/src/components/board/Board.jsx"],"names":["React","io","Download","Board","props","socket","connect","isDrawing","on","data","root","interval","setInterval","clearInterval","image","Image","canvas","document","querySelector","ctx","getContext","onload","drawImage","src","emit","room","drawOnCanvas","newProps","strokeStyle","color","lineWidth","size","sketch","sketch_style","getComputedStyle","width","parseInt","getPropertyValue","height","mouse","x","y","last_mouse","addEventListener","e","pageX","offsetLeft","pageY","offsetTop","lineJoin","lineCap","onPaint","removeEventListener","rooms","beginPath","moveTo","lineTo","closePath","stroke","timeout","undefined","clearTimeout","setTimeout","base64ImageData","toDataURL","console","log","download","getElementById","replace","setAttribute","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport io from 'socket.io-client';\nimport './style.css';\nimport { Download } from \"react-bootstrap-icons\";\n\nclass Board extends React.Component {\n \n    \n    socket = io.connect(\"https://whiteboard-for-inno.herokuapp.com\");\n    room;\n    timeout;\n    ctx;\n    isDrawing = false;\n    \n    constructor(props) {\n        super(props);\n      \n        this.socket.on(\"canvas-data\", function(data){\n\n            var root = this;\n            var interval = setInterval(function(){\n                if(root.isDrawing) return;\n                root.isDrawing = true;\n                clearInterval(interval);\n                var image = new Image();\n                var canvas = document.querySelector('#board');\n                var ctx = canvas.getContext('2d');\n                image.onload = function() {\n                    ctx.drawImage(image, 0, 0);\n\n                    root.isDrawing = false;\n                };\n                image.src = data;\n            }, 200)\n        })\n        \n    }\n\n    componentDidMount() {\n        //  console.log(this.props)\n        this.socket.emit(\"join-room\",this.props.room);\n        this.drawOnCanvas();\n    }\n    \n\n    componentWillReceiveProps(newProps) {\n        this.ctx.strokeStyle = newProps.color;\n        this.ctx.lineWidth = newProps.size;\n        this.room=newProps.room;\n    }\n    \n    drawOnCanvas() {\n        var canvas = document.querySelector('#board');\n        this.ctx = canvas.getContext('2d');\n        var ctx = this.ctx;\n\n        var sketch = document.querySelector('#sketch');\n        var sketch_style = getComputedStyle(sketch);\n        canvas.width = parseInt(sketch_style.getPropertyValue('width'));\n        canvas.height = parseInt(sketch_style.getPropertyValue('height'));\n\n        var mouse = {x: 0, y: 0};\n        var last_mouse = {x: 0, y: 0};\n\n        /* Mouse Capturing Work */\n        canvas.addEventListener('mousemove', function(e) {\n            last_mouse.x = mouse.x;\n            last_mouse.y = mouse.y;\n\n            mouse.x = e.pageX - this.offsetLeft;\n            mouse.y = e.pageY - this.offsetTop;\n        }, false);\n\n        \n        \n        /* Drawing on Paint App */\n        ctx.lineWidth = this.props.size;\n        ctx.lineJoin = 'round';\n        ctx.lineCap = 'round';\n        ctx.strokeStyle = this.props.color;\n     \n        canvas.addEventListener('mousedown', function(e) {\n            canvas.addEventListener('mousemove', onPaint, false);\n        }, false);\n\n        canvas.addEventListener('mouseup', function() {\n            canvas.removeEventListener('mousemove', onPaint, false);\n        }, false);\n        var rooms=this.props.room;\n        // console.log(this.props.room)\n        var root = this;\n        var onPaint = function() {\n            ctx.beginPath();\n            ctx.moveTo(last_mouse.x, last_mouse.y);\n            ctx.lineTo(mouse.x, mouse.y);\n            ctx.closePath();\n            ctx.stroke();\n              \n            if(root.timeout != undefined) clearTimeout(root.timeout);\n            root.timeout = setTimeout(function(){\n                var base64ImageData = canvas.toDataURL(\"image/png\");\n                console.log(rooms);\n                root.socket.emit(\"canvas-data\", base64ImageData,rooms);\n            }, 500)\n        };\n    }\n   \n    render() {\n        return (\n            <div class=\"sketch\" id=\"sketch\">\n                <a id=\"download\" download=\"whiteboard.png\">\n                <button type=\"button\" className='bydownbtn' onClick={()=>{var download = document.getElementById(\"download\");\n                 var image = document.getElementById(\"board\").toDataURL(\"image/png\")\n                 .replace(\"image/png\", \"image/octet-stream\");\n                 download.setAttribute(\"href\", image);}}><Download/></button>\n                </a>\n                <canvas className=\"board\" id=\"board\"></canvas>\n            </div>\n        )\n    }\n}\n\nexport default Board"]},"metadata":{},"sourceType":"module"}